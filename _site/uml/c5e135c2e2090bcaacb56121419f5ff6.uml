@startuml

== 充值 ==
用户 -> 充值 : 调用充值接口
充值 -> 账户入账 : 申请入账100元
账户入账 -> 账户余额 : 余额+100元
账户余额 -> 用户: 返回余额
== 账户支付 ==
用户 -> 账户余额: 校验余额 >= 100元
账户余额 -> 账户出账: 申请出账100元
账户出账 -> 账户余额: 余额-100元
账户余额 -> 用户: 余额支付成功
== 订单支付(充值 + 账户支付) ==
用户 -> 充值 : 调用支付接口
充值 -> 账户入账 : 申请入账100元
账户入账 -> 账户余额 : 余额+100元
账户余额 -> 账户余额: 校验余额 >= 100元
账户余额 -> 账户出账: 申请出账100元
账户出账 -> 账户余额: 余额-100元
账户余额 -> 用户: 余额支付成功
== 账户退款 ==
用户 -> 账户余额: 用户或系统发起退款申请、校验余额 >= 100元
账户余额 -> 企业支付: 申请企业支付，退款100元给用户
企业支付 -> 账户出账: 支付成功
账户出账 -> 账户余额: -100元
账户余额 -> 用户: 通知用户退款成功
== 提现(同账户退款) ==
用户 -> 账户余额: 用户发起提现申请、校验余额 >= 100元
账户余额 -> 企业支付: 申请企业支付，提现100元给用户
企业支付 -> 账户出账: 支付成功
账户出账 -> 账户余额: -100元
账户余额 -> 用户: 通知用户提现成功

@enduml